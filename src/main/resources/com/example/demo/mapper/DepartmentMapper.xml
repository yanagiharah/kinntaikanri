<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.example.demo.mapper.DepartmentMapper">



<!-- 部署取得 -->
<select id="selectDepartment"
	resultType="com.example.demo.model.Department">
	SELECT *
	FROM department;
</select>


<!-- テーブル内のdepartment_nameに重複が無いかを確認ののちに登録 -->
<insert id="insertDepartment">
	INSERT INTO department (department_name, is_active)
	SELECT #{newDepartmentName}, 1
	WHERE NOT EXISTS (
	SELECT 1
	FROM department
	WHERE department_name = #{newDepartmentName}
);
</insert>

<!-- 部署名更新 -->
<update id ="updateDepartmentName">
	UPDATE department SET department_name = #{newDepartmentName} WHERE department_name = #{oldDepartmentName};
</update>

<!-- 部署無効化更新 -->
<update id ="updateDepartmentName">
	UPDATE department SET is_active = 0 WHERE department_name = #{oldDepartmentName};
</update>

<!-- 日付指定範囲削除 -->
<!--<delete id="deleteByAttendanceOfMonth">-->
<!--	delete from attendance-->
<!--	WHERE attendance.user_id = #{userId} AND attendance_date BETWEEN #{targetDate} AND #{endDate};-->
<!--</delete>-->


</mapper>